<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE PatternGuards, ScopedTypeVariables, ExistentialQuantification, DeriveDataTypeable #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# OPTIONS_GHC -O0 #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- | This module captures annotations on a value, and builds a 'Capture' value.</span><span>
</span><span id="line-5"></span><span class="hs-comment">--   This module has two ways of writing annotations:</span><span>
</span><span id="line-6"></span><span class="hs-comment">--</span><span>
</span><span id="line-7"></span><span class="hs-comment">--   /Impure/: The impure method of writing annotations is susceptible to over-optimisation by GHC</span><span>
</span><span id="line-8"></span><span class="hs-comment">--   - sometimes @\{\-\# OPTIONS_GHC -fno-cse \#\-\}@ will be required.</span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">--   /Pure/: The pure method is more verbose, and lacks some type safety.</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">--   As an example of the two styles:</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- &gt; data Foo = Foo {foo :: Int, bar :: Int}</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">--   @ impure = 'capture' $ Foo {foo = 12, bar = 'many' [1 '&amp;=' \&quot;inner\&quot;, 2]} '&amp;=' \&quot;top\&quot;@</span><span>
</span><span id="line-17"></span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span class="hs-comment">--   @ pure = 'capture_' $ 'record' Foo{} [foo := 12, bar :=+ ['atom' 1 '+=' \&quot;inner\&quot;, 'atom' 2]] '+=' \&quot;top\&quot;@</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">--   Both evaluate to:</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- &gt; Capture (Ann &quot;top&quot;) (Ctor (Foo 12 1) [Value 12, Many [Ann &quot;inner&quot; (Value 1), Value 2]]</span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System.Console.CmdArgs.Annotate</span><span class="hs-special">(</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Capture framework</span></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier">Capture</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier">Any</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier">fromCapture</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#defaultMissing"><span class="hs-identifier">defaultMissing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Impure</span></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture"><span class="hs-identifier">capture</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#many"><span class="hs-identifier">many</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%26%3D"><span class="hs-operator">(&amp;=)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Pure</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier">capture_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#many_"><span class="hs-identifier">many_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%2B%3D"><span class="hs-operator">(+=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#atom"><span class="hs-identifier">atom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#record"><span class="hs-identifier">record</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier">Annotate</span></a></span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D"><span class="hs-operator">(:=)</span></a></span><span class="hs-special">,</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D%2B"><span class="hs-operator">(:=+)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.State</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Data</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Data</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IORef</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO.Unsafe</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Generics.Any.html"><span class="hs-identifier">Data.Generics.Any</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">2</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%26%3D"><span class="hs-operator hs-type">&amp;=</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%2B%3D"><span class="hs-operator hs-type">+=</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">3</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D"><span class="hs-operator hs-type">:=</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="annot"><span class="hs-comment">-- | The result of capturing some annotations.</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">data</span><span> </span><span id="Capture"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-var">Capture</span></a></span></span><span> </span><span id="local-6989586621679274270"><span class="annot"><a href="#local-6989586621679274270"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Many"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-var">Many</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274270"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Many values collapsed ('many' or 'many_')</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Ann"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679274270"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274270"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ An annotation attached to a value ('&amp;=' or '+=')</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Value"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-var">Value</span></a></span></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ A value (just a value, or 'atom')</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Missing"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ A missing field (a 'RecConError' exception, or missing from 'record')</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Ctor"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-var">Ctor</span></a></span></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274270"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ A constructor (a constructor, or 'record')</span></span><span>
</span><span id="line-53"></span><span>      </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679274431"><span id="local-6989586621679274449"><span id="local-6989586621679274453"><span class="annot"><span class="annottext">Int -&gt; Capture ann -&gt; ShowS
[Capture ann] -&gt; ShowS
Capture ann -&gt; String
(Int -&gt; Capture ann -&gt; ShowS)
-&gt; (Capture ann -&gt; String)
-&gt; ([Capture ann] -&gt; ShowS)
-&gt; Show (Capture ann)
forall ann. Show ann =&gt; Int -&gt; Capture ann -&gt; ShowS
forall ann. Show ann =&gt; [Capture ann] -&gt; ShowS
forall ann. Show ann =&gt; Capture ann -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall ann. Show ann =&gt; Int -&gt; Capture ann -&gt; ShowS
showsPrec :: Int -&gt; Capture ann -&gt; ShowS
$cshow :: forall ann. Show ann =&gt; Capture ann -&gt; String
show :: Capture ann -&gt; String
$cshowList :: forall ann. Show ann =&gt; [Capture ann] -&gt; ShowS
showList :: [Capture ann] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679274458"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>    </span><span id="local-6989586621679274465"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; Capture a -&gt; Capture b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679274466"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274466"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span id="local-6989586621679274467"><span class="annot"><span class="annottext">[Capture a]
</span><a href="#local-6989586621679274467"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Capture b] -&gt; Capture b
forall ann. [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">([Capture b] -&gt; Capture b) -&gt; [Capture b] -&gt; Capture b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture a -&gt; Capture b) -&gt; [Capture a] -&gt; [Capture b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Capture a -&gt; Capture b
forall a b. (a -&gt; b) -&gt; Capture a -&gt; Capture b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274466"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Capture a]
</span><a href="#local-6989586621679274467"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span id="local-6989586621679274468"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274468"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679274469"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274469"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679274470"><span class="annot"><span class="annottext">Capture a
</span><a href="#local-6989586621679274470"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Capture b -&gt; Capture b
forall ann. ann -&gt; Capture ann -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274468"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274469"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Capture b -&gt; Capture b) -&gt; Capture b -&gt; Capture b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Capture a -&gt; Capture b
forall a b. (a -&gt; b) -&gt; Capture a -&gt; Capture b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274468"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Capture a
</span><a href="#local-6989586621679274470"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span id="local-6989586621679274471"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274471"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span id="local-6989586621679274472"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274472"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture b
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274472"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span id="local-6989586621679274473"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274473"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621679274474"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274474"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture b
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274474"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span id="local-6989586621679274475"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274475"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-type">Ctor</span></a></span><span> </span><span id="local-6989586621679274476"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274476"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679274477"><span class="annot"><span class="annottext">[Capture a]
</span><a href="#local-6989586621679274477"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Capture b] -&gt; Capture b
forall ann. Any -&gt; [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-var">Ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274476"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">([Capture b] -&gt; Capture b) -&gt; [Capture b] -&gt; Capture b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture a -&gt; Capture b) -&gt; [Capture a] -&gt; [Capture b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Capture a -&gt; Capture b
forall a b. (a -&gt; b) -&gt; Capture a -&gt; Capture b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679274475"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Capture a]
</span><a href="#local-6989586621679274477"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><span class="hs-comment">-- | Return the value inside a capture.</span></span><span>
</span><span id="line-64"></span><span id="local-6989586621679274276"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-type">fromCapture</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274276"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span></span><span>
</span><span id="line-65"></span><span id="fromCapture"><span class="annot"><span class="annottext">fromCapture :: forall ann. Capture ann -&gt; Any
</span><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var hs-var">fromCapture</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274478"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274478"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Capture ann]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Capture ann -&gt; Any
forall ann. Capture ann -&gt; Any
</span><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274478"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-66"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679274479"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274479"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Capture ann -&gt; Any
forall ann. Capture ann -&gt; Any
</span><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274479"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-67"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span id="local-6989586621679274480"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274480"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274480"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-68"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621679274481"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274481"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274481"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-69"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-type">Ctor</span></a></span><span> </span><span id="local-6989586621679274482"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274482"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274482"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="annot"><span class="hs-comment">-- | Remove all Missing values by using any previous instances as default values</span></span><span>
</span><span id="line-73"></span><span id="local-6989586621679274278"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#defaultMissing"><span class="hs-identifier hs-type">defaultMissing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274278"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274278"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-74"></span><span id="defaultMissing"><span class="annot"><span class="annottext">defaultMissing :: forall ann. Capture ann -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#defaultMissing"><span class="hs-identifier hs-var hs-var">defaultMissing</span></a></span></span><span> </span><span id="local-6989586621679274485"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274485"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State [(Any, String, Capture ann)] (Capture ann)
-&gt; [(Any, String, Capture ann)] -&gt; Capture ann
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">evalState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; State [(Any, String, Capture ann)] (Capture ann)
forall {m :: * -&gt; *} {ann}.
Monad m =&gt;
Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274485"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-76"></span><span>        </span><span id="local-6989586621679274487"><span class="annot"><span class="annottext">f :: Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274487"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679274534"><span class="annot"><span class="annottext">Maybe Any
</span><a href="#local-6989586621679274534"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span id="local-6989586621679274535"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679274535"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span id="local-6989586621679274536"><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274536"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Capture ann] -&gt; Capture ann)
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b.
(a -&gt; b)
-&gt; StateT [(Any, String, Capture ann)] m a
-&gt; StateT [(Any, String, Capture ann)] m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[Capture ann] -&gt; Capture ann
forall ann. [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT [(Any, String, Capture ann)] m [Capture ann]
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture ann
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
</span><a href="#local-6989586621679274534"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679274535"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274536"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621679274538"><span class="annot"><span class="annottext">Maybe Any
</span><a href="#local-6989586621679274538"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span id="local-6989586621679274539"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679274539"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679274540"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679274540"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679274541"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274541"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Capture ann -&gt; Capture ann)
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b.
(a -&gt; b)
-&gt; StateT [(Any, String, Capture ann)] m a
-&gt; StateT [(Any, String, Capture ann)] m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann -&gt; Capture ann -&gt; Capture ann
forall ann. ann -&gt; Capture ann -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679274540"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT [(Any, String, Capture ann)] m (Capture ann)
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
</span><a href="#local-6989586621679274538"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679274539"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274541"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621679274542"><span class="annot"><span class="annottext">Maybe Any
</span><a href="#local-6989586621679274542"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span id="local-6989586621679274543"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679274543"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span id="local-6989586621679274544"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274544"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Capture ann -&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a. a -&gt; StateT [(Any, String, Capture ann)] m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Capture ann
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture ann
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274544"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679274545"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274545"><span class="hs-identifier hs-var">ctor</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679274546"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274546"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621679274547"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274547"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>            </span><span id="local-6989586621679274548"><span class="annot"><span class="annottext">[(Any, String, Capture ann)]
</span><a href="#local-6989586621679274548"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT [(Any, String, Capture ann)] m [(Any, String, Capture ann)]
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-81"></span><span>            </span><span class="annot"><span class="annottext">Capture ann -&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a. a -&gt; StateT [(Any, String, Capture ann)] m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Capture ann
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Capture ann] -&gt; Capture ann
forall a. HasCallStack =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">([Capture ann] -&gt; Capture ann) -&gt; [Capture ann] -&gt; Capture ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-82"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274551"><span class="hs-identifier hs-var">x2</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274552"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274552"><span class="hs-identifier hs-var">ctor2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679274553"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274553"><span class="hs-identifier hs-var">field2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679274551"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274551"><span class="hs-identifier hs-var">x2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Any, String, Capture ann)]
</span><a href="#local-6989586621679274548"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Any -&gt; TypeRep
</span><a href="Data.Generics.Any.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274545"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; TypeRep
</span><a href="Data.Generics.Any.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274552"><span class="hs-identifier hs-var">ctor2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274546"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274553"><span class="hs-identifier hs-var">field2</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Capture ann] -&gt; [Capture ann] -&gt; [Capture ann]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-83"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; [Capture ann]
forall {a}. String -&gt; a
</span><a href="#local-6989586621679274555"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;missing value encountered, no field for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274546"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; (of type &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274547"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621679274557"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274557"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall {a}. String -&gt; a
</span><a href="#local-6989586621679274555"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; String -&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;missing value encountered, but not as a field (of type &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274557"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-type">Ctor</span></a></span><span> </span><span id="local-6989586621679274558"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274558"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679274559"><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274559"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; [String]
</span><a href="Data.Generics.Any.html#fields"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274558"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[Capture ann] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274559"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-86"></span><span>            </span><span id="local-6989586621679274562"><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274562"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(String
 -&gt; Capture ann
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; [String]
-&gt; [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m [c]
</span><span class="hs-identifier hs-var">zipWithM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any
-&gt; String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274564"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274558"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; [String]
</span><a href="Data.Generics.Any.html#fields"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274558"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274559"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-87"></span><span>            </span><span class="annot"><span class="annottext">Capture ann -&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a. a -&gt; StateT [(Any, String, Capture ann)] m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Capture ann
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Capture ann] -&gt; Capture ann
forall ann. Any -&gt; [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-var">Ctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; [Any] -&gt; Any
</span><a href="Data.Generics.Any.html#recompose"><span class="hs-identifier hs-var">recompose</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274558"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">([Any] -&gt; Any) -&gt; [Any] -&gt; Any
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture ann -&gt; Any) -&gt; [Capture ann] -&gt; [Any]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Capture ann -&gt; Any
forall ann. Capture ann -&gt; Any
</span><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274562"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274562"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-type">Ctor</span></a></span><span> </span><span id="local-6989586621679274566"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274566"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679274567"><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274567"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Capture ann] -&gt; Capture ann)
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b.
(a -&gt; b)
-&gt; StateT [(Any, String, Capture ann)] m a
-&gt; StateT [(Any, String, Capture ann)] m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; [Capture ann] -&gt; Capture ann
forall ann. Any -&gt; [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-var">Ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274566"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT [(Any, String, Capture ann)] m [Capture ann]
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture ann
 -&gt; StateT [(Any, String, Capture ann)] m (Capture ann))
-&gt; [Capture ann]
-&gt; StateT [(Any, String, Capture ann)] m [Capture ann]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Any
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Capture ann]
</span><a href="#local-6989586621679274567"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>        </span><span id="local-6989586621679274564"><span class="annot"><span class="annottext">g :: Any
-&gt; String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274564"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679274568"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274568"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span id="local-6989586621679274569"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274569"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span id="local-6989586621679274570"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274570"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-91"></span><span>            </span><span id="local-6989586621679274571"><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274571"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Any
-&gt; Maybe String
-&gt; Capture ann
-&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
</span><a href="#local-6989586621679274487"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; Maybe Any
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274568"><span class="hs-identifier hs-var">ctor</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274569"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274570"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-92"></span><span>            </span><span class="annot"><span class="annottext">([(Any, String, Capture ann)] -&gt; [(Any, String, Capture ann)])
-&gt; StateT [(Any, String, Capture ann)] m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274568"><span class="hs-identifier hs-var">ctor</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274569"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274571"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(Any, String, Capture ann)
-&gt; [(Any, String, Capture ann)] -&gt; [(Any, String, Capture ann)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>            </span><span class="annot"><span class="annottext">Capture ann -&gt; StateT [(Any, String, Capture ann)] m (Capture ann)
forall a. a -&gt; StateT [(Any, String, Capture ann)] m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Capture ann
</span><a href="#local-6989586621679274571"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>        </span><span id="local-6989586621679274555"><span class="annot"><span class="annottext">err :: String -&gt; a
</span><a href="#local-6989586621679274555"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span id="local-6989586621679274575"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274575"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; a) -&gt; String -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;System.Console.CmdArgs.Annotate.defaultMissing, &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679274575"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- IMPURE BIT</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- test = show $ capture $ many [Just ((66::Int) &amp;= P 1 &amp;= P 2), Nothing &amp;= P 8] &amp;= P 3</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">{-
Notes On Purity
---------------

There is a risk that things that are unsafe will be inlined. That can generally be
removed by NOININE on everything.

There is also a risk that things get commoned up. For example:

foo = trace &quot;1&quot; 1
bar = trace &quot;1&quot; 1
main = do
    evaluate foo
    evaluate bar

Will print &quot;1&quot; only once, since foo and bar share the same pattern. However, if
anything in the value is a lambda they are not seen as equal. We exploit this by
defining const_ and id_ as per this module.

Now anything wrapped in id_ looks different from anything else.
-}</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">{-
The idea is to keep a stack of either continuations, or values
If you encounter 'many' you become a value
If you encounter '&amp;=' you increase the continuation
-}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-pragma hs-type">ref</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-132"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-133"></span><span id="ref"><span class="annot"><span class="annottext">ref :: IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-identifier hs-var hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)])
-&gt; IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)])
 -&gt; IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)])
-&gt; IO (IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)])
-&gt; IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; IO (IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)])
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="push"><span class="annot"><span class="annottext">push :: IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#push"><span class="hs-identifier hs-var hs-var">push</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; ([Either (Capture Any -&gt; Capture Any) (Capture Any)]
    -&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)])
-&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any)
-&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
-&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span id="pop"><span class="annot"><span class="annottext">pop :: IO (Either (Capture Any -&gt; Capture Any) (Capture Any))
</span><a href="System.Console.CmdArgs.Annotate.html#pop"><span class="hs-identifier hs-var hs-var">pop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679274590"><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><a href="#local-6989586621679274590"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679274591"><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="#local-6989586621679274591"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; IO [Either (Capture Any -&gt; Capture Any) (Capture Any)]
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)] -&gt; IO ()
forall a. IORef a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">writeIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="#local-6989586621679274591"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
-&gt; IO (Either (Capture Any -&gt; Capture Any) (Capture Any))
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><a href="#local-6989586621679274590"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-137"></span><span id="change"><span class="annot"><span class="annottext">change :: ((Capture Any -&gt; Capture Any)
 -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#change"><span class="hs-identifier hs-var hs-var">change</span></a></span></span><span> </span><span id="local-6989586621679274597"><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any)
-&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><a href="#local-6989586621679274597"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; ([Either (Capture Any -&gt; Capture Any) (Capture Any)]
    -&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)])
-&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="System.Console.CmdArgs.Annotate.html#ref"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">(([Either (Capture Any -&gt; Capture Any) (Capture Any)]
  -&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)])
 -&gt; IO ())
-&gt; ([Either (Capture Any -&gt; Capture Any) (Capture Any)]
    -&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)])
-&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679274598"><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="#local-6989586621679274598"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="#local-6989586621679274598"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679274599"><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274599"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679274600"><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="#local-6989586621679274600"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any)
-&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><a href="#local-6989586621679274597"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274599"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
-&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)]
-&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><a href="#local-6989586621679274600"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[Either (Capture Any -&gt; Capture Any) (Capture Any)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; [Either (Capture Any -&gt; Capture Any) (Capture Any)]
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Internal error in Capture&quot;</span></span><span>
</span><span id="line-138"></span><span id="add"><span class="annot"><span class="annottext">add :: (Capture Any -&gt; Capture Any) -&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#add"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621679274602"><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274602"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Capture Any -&gt; Capture Any)
 -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#change"><span class="hs-identifier hs-var">change</span></a></span><span> </span><span class="annot"><span class="annottext">(((Capture Any -&gt; Capture Any)
  -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
 -&gt; IO ())
-&gt; ((Capture Any -&gt; Capture Any)
    -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679274603"><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274603"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any)
-&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">((Capture Any -&gt; Capture Any)
 -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; (Capture Any -&gt; Capture Any)
-&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274603"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any)
-&gt; (Capture Any -&gt; Capture Any) -&gt; Capture Any -&gt; Capture Any
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274602"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-139"></span><span id="set"><span class="annot"><span class="annottext">set :: Capture Any -&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#set"><span class="hs-identifier hs-var hs-var">set</span></a></span></span><span> </span><span id="local-6989586621679274606"><span class="annot"><span class="annottext">Capture Any
</span><a href="#local-6989586621679274606"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Capture Any -&gt; Capture Any)
 -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#change"><span class="hs-identifier hs-var">change</span></a></span><span> </span><span class="annot"><span class="annottext">(((Capture Any -&gt; Capture Any)
  -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
 -&gt; IO ())
-&gt; ((Capture Any -&gt; Capture Any)
    -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679274607"><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274607"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any))
-&gt; Capture Any -&gt; Either (Capture Any -&gt; Capture Any) (Capture Any)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274607"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Capture Any
</span><a href="#local-6989586621679274606"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><span class="hs-comment">-- | Collapse multiple values in to one.</span></span><span>
</span><span id="line-143"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#many"><span class="hs-pragma hs-type">many</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-144"></span><span id="local-6989586621679274332"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#many"><span class="hs-identifier hs-type">many</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274332"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679274332"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274332"><span class="hs-identifier hs-type">val</span></a></span></span><span>
</span><span id="line-145"></span><span id="many"><span class="annot"><span class="annottext">many :: forall val. Data val =&gt; [val] -&gt; val
</span><a href="System.Console.CmdArgs.Annotate.html#many"><span class="hs-identifier hs-var hs-var">many</span></a></span></span><span> </span><span id="local-6989586621679274617"><span class="annot"><span class="annottext">[val]
</span><a href="#local-6989586621679274617"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO val -&gt; val
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">(IO val -&gt; val) -&gt; IO val -&gt; val
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679274618"><span class="annot"><span class="annottext">[Capture Any]
</span><a href="#local-6989586621679274618"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(val -&gt; IO (Capture Any)) -&gt; [val] -&gt; IO [Capture Any]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; IO (Capture Any)
</span><a href="System.Console.CmdArgs.Annotate.html#force"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">(Any -&gt; IO (Capture Any))
-&gt; (val -&gt; Any) -&gt; val -&gt; IO (Capture Any)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">val -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[val]
</span><a href="#local-6989586621679274617"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><span class="annottext">Capture Any -&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#set"><span class="hs-identifier hs-var">set</span></a></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; IO ()) -&gt; Capture Any -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Capture Any] -&gt; Capture Any
forall ann. [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">[Capture Any]
</span><a href="#local-6989586621679274618"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">val -&gt; IO val
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(val -&gt; IO val) -&gt; val -&gt; IO val
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[val] -&gt; val
forall a. HasCallStack =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">[val]
</span><a href="#local-6989586621679274617"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#addAnn"><span class="hs-pragma hs-type">addAnn</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-152"></span><span id="local-6989586621679274335"><span id="local-6989586621679274336"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#addAnn"><span class="hs-identifier hs-type">addAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274335"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274336"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274335"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274336"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274335"><span class="hs-identifier hs-type">val</span></a></span></span></span><span>
</span><span id="line-153"></span><span id="addAnn"><span class="annot"><span class="annottext">addAnn :: forall val ann. (Data val, Data ann) =&gt; val -&gt; ann -&gt; val
</span><a href="System.Console.CmdArgs.Annotate.html#addAnn"><span class="hs-identifier hs-var hs-var">addAnn</span></a></span></span><span> </span><span id="local-6989586621679274628"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274628"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679274629"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679274629"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO val -&gt; val
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">(IO val -&gt; val) -&gt; IO val -&gt; val
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any) -&gt; IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; Capture Any -&gt; Capture Any
forall ann. ann -&gt; Capture ann -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span><span> </span><span class="annot"><span class="annottext">(Any -&gt; Capture Any -&gt; Capture Any)
-&gt; Any -&gt; Capture Any -&gt; Capture Any
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ann -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679274629"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><span class="annottext">val -&gt; IO val
forall a. a -&gt; IO a
</span><span class="hs-identifier hs-var">evaluate</span></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274628"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="annottext">val -&gt; IO val
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274628"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">-- | Capture a value. Note that if the value is evaluated</span><span>
</span><span id="line-160"></span><span class="hs-comment">--   more than once the result may be different, i.e.</span><span>
</span><span id="line-161"></span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- &gt; capture x /= capture x</span><span>
</span><span id="line-163"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture"><span class="hs-pragma hs-type">capture</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-164"></span><span id="local-6989586621679274339"><span id="local-6989586621679274340"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture"><span class="hs-identifier hs-type">capture</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274339"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274340"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274339"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274340"><span class="hs-identifier hs-type">ann</span></a></span></span></span><span>
</span><span id="line-165"></span><span id="capture"><span class="annot"><span class="annottext">capture :: forall val ann. (Data val, Data ann) =&gt; val -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#capture"><span class="hs-identifier hs-var hs-var">capture</span></a></span></span><span> </span><span id="local-6989586621679274640"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274640"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (Capture ann) -&gt; Capture ann
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Capture ann) -&gt; Capture ann)
-&gt; IO (Capture ann) -&gt; Capture ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture ann)
-&gt; IO (Capture Any) -&gt; IO (Capture ann)
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Any -&gt; ann) -&gt; Capture Any -&gt; Capture ann
forall a b. (a -&gt; b) -&gt; Capture a -&gt; Capture b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; ann
forall a. Typeable a =&gt; Any -&gt; a
</span><a href="Data.Generics.Any.html#fromAny"><span class="hs-identifier hs-var">fromAny</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (Capture Any) -&gt; IO (Capture ann))
-&gt; IO (Capture Any) -&gt; IO (Capture ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; IO (Capture Any)
</span><a href="System.Console.CmdArgs.Annotate.html#force"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">(Any -&gt; IO (Capture Any)) -&gt; Any -&gt; IO (Capture Any)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">val -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274640"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#force"><span class="hs-identifier hs-type">force</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span id="force"><span class="annot"><span class="annottext">force :: Any -&gt; IO (Capture Any)
</span><a href="System.Console.CmdArgs.Annotate.html#force"><span class="hs-identifier hs-var hs-var">force</span></a></span></span><span> </span><span id="local-6989586621679274642"><span class="annot"><span class="annottext">x :: Any
</span><a href="#local-6989586621679274642"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621679274656"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274656"><span class="hs-identifier hs-var">xx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="annottext">IO ()
</span><a href="System.Console.CmdArgs.Annotate.html#push"><span class="hs-identifier hs-var">push</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span id="local-6989586621679274657"><span class="annot"><span class="annottext">Either RecConError a
</span><a href="#local-6989586621679274657"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO (Either RecConError a)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><span class="hs-identifier hs-var">try</span></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IO (Either RecConError a))
-&gt; IO a -&gt; IO (Either RecConError a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
</span><span class="hs-identifier hs-var">evaluate</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274656"><span class="hs-identifier hs-var">xx</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621679274659"><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><a href="#local-6989586621679274659"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Either (Capture Any -&gt; Capture Any) (Capture Any))
</span><a href="System.Console.CmdArgs.Annotate.html#pop"><span class="hs-identifier hs-var">pop</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><a href="#local-6989586621679274659"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-174"></span><span>        </span><span class="annot"><span class="annottext">Either (Capture Any -&gt; Capture Any) (Capture Any)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecConError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RecConError</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either RecConError a
</span><a href="#local-6989586621679274657"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; IO (Capture Any)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; IO (Capture Any))
-&gt; Capture Any -&gt; IO (Capture Any)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture Any
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274642"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-175"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679274660"><span class="annot"><span class="annottext">Capture Any
</span><a href="#local-6989586621679274660"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; IO (Capture Any)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Capture Any
</span><a href="#local-6989586621679274660"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-176"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679274661"><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274661"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; Bool
</span><a href="Data.Generics.Any.html#isAlgType"><span class="hs-identifier hs-var">isAlgType</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274642"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; IO (Capture Any)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; IO (Capture Any))
-&gt; Capture Any -&gt; IO (Capture Any)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274661"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any) -&gt; Capture Any -&gt; Capture Any
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture Any
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274642"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-177"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-178"></span><span>            </span><span id="local-6989586621679274664"><span class="annot"><span class="annottext">[Capture Any]
</span><a href="#local-6989586621679274664"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Any -&gt; IO (Capture Any)) -&gt; [Any] -&gt; IO [Capture Any]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; IO (Capture Any)
</span><a href="System.Console.CmdArgs.Annotate.html#force"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">([Any] -&gt; IO [Capture Any]) -&gt; [Any] -&gt; IO [Capture Any]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Any]
</span><a href="Data.Generics.Any.html#children"><span class="hs-identifier hs-var">children</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274642"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span class="annot"><span class="annottext">Capture Any -&gt; IO (Capture Any)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; IO (Capture Any))
-&gt; Capture Any -&gt; IO (Capture Any)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Capture Any -&gt; Capture Any
</span><a href="#local-6989586621679274661"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Capture Any -&gt; Capture Any) -&gt; Capture Any -&gt; Capture Any
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Capture Any] -&gt; Capture Any
forall ann. Any -&gt; [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-var">Ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274642"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[Capture Any]
</span><a href="#local-6989586621679274664"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-comment">-- | Add an annotation to a value.</span><span>
</span><span id="line-183"></span><span class="hs-comment">--</span><span>
</span><span id="line-184"></span><span class="hs-comment">--   It is recommended that anyone making use of this function redefine</span><span>
</span><span id="line-185"></span><span class="hs-comment">--   it with a more restrictive type signature to control the type of the</span><span>
</span><span id="line-186"></span><span class="hs-comment">--   annotation (the second argument). Any redefinitions of this function</span><span>
</span><span id="line-187"></span><span class="hs-comment">--   should add an INLINE pragma, to reduce the chance of incorrect</span><span>
</span><span id="line-188"></span><span class="hs-comment">--   optimisations.</span><span>
</span><span id="line-189"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&amp;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-190"></span><span id="local-6989586621679274666"><span id="local-6989586621679274667"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%26%3D"><span class="hs-operator hs-type">(&amp;=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274666"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274667"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274666"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274667"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274666"><span class="hs-identifier hs-type">val</span></a></span></span></span><span>
</span><span id="line-191"></span><span id="%26%3D"><span class="annot"><span class="annottext">&amp;= :: forall val ann. (Data val, Data ann) =&gt; val -&gt; ann -&gt; val
</span><a href="System.Console.CmdArgs.Annotate.html#%26%3D"><span class="hs-operator hs-var hs-var">(&amp;=)</span></a></span></span><span> </span><span id="local-6989586621679274672"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274672"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679274673"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679274673"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">val -&gt; ann -&gt; val
forall val ann. (Data val, Data ann) =&gt; val -&gt; ann -&gt; val
</span><a href="System.Console.CmdArgs.Annotate.html#addAnn"><span class="hs-identifier hs-var">addAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">val -&gt; val
forall a. a -&gt; a
</span><a href="System.Console.CmdArgs.Annotate.html#id_"><span class="hs-identifier hs-var">id_</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621679274672"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann -&gt; ann
forall a. a -&gt; a
</span><a href="System.Console.CmdArgs.Annotate.html#id_"><span class="hs-identifier hs-var">id_</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621679274673"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#id_"><span class="hs-pragma hs-type">id_</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-194"></span><span id="local-6989586621679274675"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#id_"><span class="hs-identifier hs-type">id_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679274675"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274675"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-195"></span><span id="id_"><span class="annot"><span class="annottext">id_ :: forall a. a -&gt; a
</span><a href="System.Console.CmdArgs.Annotate.html#id_"><span class="hs-identifier hs-var hs-var">id_</span></a></span></span><span> </span><span id="local-6989586621679274676"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274676"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">()
</span><a href="#local-6989586621679274677"><span class="hs-keyword hs-var">unit</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274676"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679274677"><span class="annot"><span class="annottext">unit :: ()
</span><a href="#local-6989586621679274677"><span class="hs-keyword hs-var hs-var">unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- PURE PART</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="annot"><span class="hs-comment">-- | This type represents an annotated value. The type of the underlying value is not specified.</span></span><span>
</span><span id="line-203"></span><span class="hs-keyword">data</span><span> </span><span id="Annotate"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-var">Annotate</span></a></span></span><span> </span><span id="local-6989586621679274362"><span class="annot"><a href="#local-6989586621679274362"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679274679"><span class="annot"><a href="#local-6989586621679274679"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621679274680"><span class="annot"><a href="#local-6989586621679274680"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274679"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274680"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679274679"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274680"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span id="%3A%3D"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D"><span class="hs-operator hs-var">:=</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679274680"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Construct a field, @fieldname := value@.</span></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679274681"><span class="annot"><a href="#local-6989586621679274681"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621679274682"><span class="annot"><a href="#local-6989586621679274682"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274681"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274682"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679274681"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274682"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span id="%3A%3D%2B"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D%2B"><span class="hs-operator hs-var">:=+</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274362"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Add annotations to a field.</span></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AAnn"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AAnn"><span class="hs-identifier hs-var">AAnn</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679274362"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274362"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AMany"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AMany"><span class="hs-identifier hs-var">AMany</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274362"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AAtom"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AAtom"><span class="hs-identifier hs-var">AAtom</span></a></span></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ACtor"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ACtor"><span class="hs-identifier hs-var">ACtor</span></a></span></span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274362"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span>
</span><span id="line-211"></span><span>      </span><span class="hs-comment">-- specifically DOES NOT derive Data, to avoid people accidentally including it</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><span class="hs-comment">-- | Add an annotation to a value.</span></span><span>
</span><span id="line-215"></span><span id="local-6989586621679274356"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%2B%3D"><span class="hs-operator hs-type">(+=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274356"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274356"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274356"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-216"></span><span id="%2B%3D"><span class="annot"><span class="annottext">+= :: forall ann. Annotate ann -&gt; ann -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#%2B%3D"><span class="hs-operator hs-var hs-var">(+=)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ann -&gt; Annotate ann -&gt; Annotate ann)
-&gt; Annotate ann -&gt; ann -&gt; Annotate ann
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ann -&gt; Annotate ann -&gt; Annotate ann
forall ann. ann -&gt; Annotate ann -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#AAnn"><span class="hs-identifier hs-var">AAnn</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><span class="hs-comment">-- | Collapse many annotated values in to one.</span></span><span>
</span><span id="line-219"></span><span id="local-6989586621679274363"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#many_"><span class="hs-identifier hs-type">many_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274363"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274363"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-220"></span><span id="many_"><span class="annot"><span class="annottext">many_ :: forall a. [Annotate a] -&gt; Annotate a
</span><a href="System.Console.CmdArgs.Annotate.html#many_"><span class="hs-identifier hs-var hs-var">many_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Annotate a] -&gt; Annotate a
forall a. [Annotate a] -&gt; Annotate a
</span><a href="System.Console.CmdArgs.Annotate.html#AMany"><span class="hs-identifier hs-var">AMany</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><span class="hs-comment">-- | Lift a pure value to an annotation.</span></span><span>
</span><span id="line-223"></span><span id="local-6989586621679274365"><span id="local-6989586621679274366"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#atom"><span class="hs-identifier hs-type">atom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274365"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274365"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274366"><span class="hs-identifier hs-type">ann</span></a></span></span></span><span>
</span><span id="line-224"></span><span id="atom"><span class="annot"><span class="annottext">atom :: forall val ann. Data val =&gt; val -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#atom"><span class="hs-identifier hs-var hs-var">atom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Annotate ann
forall ann. Any -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#AAtom"><span class="hs-identifier hs-var">AAtom</span></a></span><span> </span><span class="annot"><span class="annottext">(Any -&gt; Annotate ann) -&gt; (val -&gt; Any) -&gt; val -&gt; Annotate ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">val -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-comment">-- | Create a constructor/record. The first argument should be</span><span>
</span><span id="line-227"></span><span class="hs-comment">--   the type of field, the second should be a list of fields constructed</span><span>
</span><span id="line-228"></span><span class="hs-comment">--   originally defined by @:=@ or @:=+@.</span><span>
</span><span id="line-229"></span><span class="hs-comment">--</span><span>
</span><span id="line-230"></span><span class="hs-comment">--   This operation is not type safe, and may raise an exception at runtime</span><span>
</span><span id="line-231"></span><span class="hs-comment">--   if any field has the wrong type or label.</span><span>
</span><span id="line-232"></span><span id="local-6989586621679274369"><span id="local-6989586621679274370"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#record"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679274369"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274369"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274370"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274370"><span class="hs-identifier hs-type">ann</span></a></span></span></span><span>
</span><span id="line-233"></span><span id="record"><span class="annot"><span class="annottext">record :: forall a ann. Data a =&gt; a -&gt; [Annotate ann] -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#record"><span class="hs-identifier hs-var hs-var">record</span></a></span></span><span> </span><span id="local-6989586621679274692"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274692"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679274693"><span class="annot"><span class="annottext">[Annotate ann]
</span><a href="#local-6989586621679274693"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Annotate ann] -&gt; Annotate ann
forall ann. Any -&gt; [Annotate ann] -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#ACtor"><span class="hs-identifier hs-var">ACtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274692"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Annotate ann]
</span><a href="#local-6989586621679274693"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="annot"><span class="hs-comment">-- | Capture the annotations from an annotated value.</span></span><span>
</span><span id="line-236"></span><span id="local-6989586621679274373"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-type">capture_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679274373"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274373"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Capture"><span class="hs-identifier hs-type">Capture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274373"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-237"></span><span id="capture_"><span class="annot"><span class="annottext">capture_ :: forall a. Show a =&gt; Annotate a -&gt; Capture a
</span><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var hs-var">capture_</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AAnn"><span class="hs-identifier hs-type">AAnn</span></a></span><span> </span><span id="local-6989586621679274704"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274704"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679274705"><span class="annot"><span class="annottext">Annotate a
</span><a href="#local-6989586621679274705"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Capture a -&gt; Capture a
forall ann. ann -&gt; Capture ann -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274704"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Annotate a -&gt; Capture a
forall a. Show a =&gt; Annotate a -&gt; Capture a
</span><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="annot"><span class="annottext">Annotate a
</span><a href="#local-6989586621679274705"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AMany"><span class="hs-identifier hs-type">AMany</span></a></span><span> </span><span id="local-6989586621679274706"><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274706"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Capture a] -&gt; Capture a
forall ann. [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Annotate a -&gt; Capture a) -&gt; [Annotate a] -&gt; [Capture a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Annotate a -&gt; Capture a
forall a. Show a =&gt; Annotate a -&gt; Capture a
</span><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274706"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AAtom"><span class="hs-identifier hs-type">AAtom</span></a></span><span> </span><span id="local-6989586621679274707"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274707"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture a
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274707"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-240"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c -&gt; f
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D"><span class="hs-operator hs-type">:=</span></a></span><span> </span><span id="local-6989586621679274711"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679274711"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Capture a
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">(Any -&gt; Capture a) -&gt; Any -&gt; Capture a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">f -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679274711"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-241"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c -&gt; f
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D%2B"><span class="hs-operator hs-type">:=+</span></a></span><span> </span><span id="local-6989586621679274715"><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274715"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Capture a] -&gt; Capture a
forall ann. [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">([Capture a] -&gt; Capture a) -&gt; [Capture a] -&gt; Capture a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotate a -&gt; Capture a) -&gt; [Annotate a] -&gt; [Capture a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Annotate a -&gt; Capture a
forall a. Show a =&gt; Annotate a -&gt; Capture a
</span><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274715"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-242"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ACtor"><span class="hs-identifier hs-type">ACtor</span></a></span><span> </span><span id="local-6989586621679274716"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274716"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679274717"><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274717"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679274719"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Capture a
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Capture a) -&gt; String -&gt; Capture a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Some fields got repeated under &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274716"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; String
</span><a href="Data.Generics.Any.html#ctor"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274716"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679274719"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Capture a] -&gt; Capture a
forall ann. Any -&gt; [Capture ann] -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Ctor"><span class="hs-identifier hs-var">Ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274721"><span class="hs-identifier hs-var">x2</span></a></span><span> </span><span class="annot"><span class="annottext">[Capture a]
</span><a href="#local-6989586621679274722"><span class="hs-identifier hs-var">xs2</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-246"></span><span>        </span><span id="local-6989586621679274721"><span class="annot"><span class="annottext">x2 :: Any
</span><a href="#local-6989586621679274721"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Any] -&gt; Any
</span><a href="Data.Generics.Any.html#recompose"><span class="hs-identifier hs-var">recompose</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274716"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">([Any] -&gt; Any) -&gt; [Any] -&gt; Any
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Capture a -&gt; Any) -&gt; [Capture a] -&gt; [Any]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Capture a -&gt; Any
forall ann. Capture ann -&gt; Any
</span><a href="System.Console.CmdArgs.Annotate.html#fromCapture"><span class="hs-identifier hs-var">fromCapture</span></a></span><span> </span><span class="annot"><span class="annottext">[Capture a]
</span><a href="#local-6989586621679274722"><span class="hs-identifier hs-var">xs2</span></a></span><span>
</span><span id="line-247"></span><span>        </span><span id="local-6989586621679274722"><span class="annot"><span class="annottext">xs2 :: [Capture a]
</span><a href="#local-6989586621679274722"><span class="hs-identifier hs-var hs-var">xs2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Capture a -&gt; Maybe (Capture a) -&gt; Capture a
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; Capture a
forall ann. Any -&gt; Capture ann
</span><a href="System.Console.CmdArgs.Annotate.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274729"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Capture a) -&gt; Capture a) -&gt; Maybe (Capture a) -&gt; Capture a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [(Int, Capture a)] -&gt; Maybe (Capture a)
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274731"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Capture a)]
</span><a href="#local-6989586621679274732"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679274732"><span class="annot"><span class="annottext">is :: [(Int, Capture a)]
</span><a href="#local-6989586621679274732"><span class="hs-identifier hs-var hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Capture a] -&gt; [(Int, Capture a)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679274734"><span class="hs-identifier hs-var">inds</span></a></span><span> </span><span class="annot"><span class="annottext">([Capture a] -&gt; [(Int, Capture a)])
-&gt; [Capture a] -&gt; [(Int, Capture a)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotate a -&gt; Capture a) -&gt; [Annotate a] -&gt; [Capture a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Annotate a -&gt; Capture a
forall a. Show a =&gt; Annotate a -&gt; Capture a
</span><a href="System.Console.CmdArgs.Annotate.html#capture_"><span class="hs-identifier hs-var">capture_</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274717"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274731"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274731"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679274729"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274729"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Any] -&gt; [(Int, Any)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">([Any] -&gt; [(Int, Any)]) -&gt; [Any] -&gt; [(Int, Any)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Any]
</span><a href="Data.Generics.Any.html#children"><span class="hs-identifier hs-var">children</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274716"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-248"></span><span>        </span><span id="local-6989586621679274734"><span class="annot"><span class="annottext">inds :: [Int]
</span><a href="#local-6989586621679274734"><span class="hs-identifier hs-var hs-var">inds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int -&gt; Int) -&gt; [Int] -&gt; [Maybe Int] -&gt; [Int]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">([Maybe Int] -&gt; [Int]) -&gt; [Maybe Int] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotate a -&gt; Maybe Int) -&gt; [Annotate a] -&gt; [Maybe Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; Annotate a -&gt; Maybe Int
forall a. Any -&gt; Annotate a -&gt; Maybe Int
</span><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var">fieldIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274716"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Annotate a]
</span><a href="#local-6989586621679274717"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-249"></span><span>        </span><span id="local-6989586621679274719"><span class="annot"><span class="annottext">rep :: [Int]
</span><a href="#local-6989586621679274719"><span class="hs-identifier hs-var hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679274734"><span class="hs-identifier hs-var">inds</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Int] -&gt; [Int]
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">\\</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Int]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nub</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679274734"><span class="hs-identifier hs-var">inds</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span id="local-6989586621679274388"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-type">fieldIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#Annotate"><span class="hs-identifier hs-type">Annotate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679274388"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-253"></span><span id="fieldIndex"><span class="annot"><span class="annottext">fieldIndex :: forall a. Any -&gt; Annotate a -&gt; Maybe Int
</span><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var hs-var">fieldIndex</span></a></span></span><span> </span><span id="local-6989586621679274743"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274743"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#AAnn"><span class="hs-identifier hs-type">AAnn</span></a></span><span> </span><span id="local-6989586621679274744"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274744"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679274745"><span class="annot"><span class="annottext">Annotate a
</span><a href="#local-6989586621679274745"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Annotate a -&gt; Maybe Int
forall a. Any -&gt; Annotate a -&gt; Maybe Int
</span><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var">fieldIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274743"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="annot"><span class="annottext">Annotate a
</span><a href="#local-6989586621679274745"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-254"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var">fieldIndex</span></a></span><span> </span><span id="local-6989586621679274746"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274746"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274751"><span class="annot"><span class="annottext">c -&gt; f
</span><a href="#local-6989586621679274751"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D"><span class="hs-operator hs-type">:=</span></a></span><span> </span><span class="annot"><span class="annottext">f
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Annotate Any -&gt; Maybe Int
forall a. Any -&gt; Annotate a -&gt; Maybe Int
</span><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var">fieldIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274746"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c -&gt; f
</span><a href="#local-6989586621679274751"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(c -&gt; f) -&gt; [Annotate Any] -&gt; Annotate Any
forall ann c f.
(Data c, Data f) =&gt;
(c -&gt; f) -&gt; [Annotate ann] -&gt; Annotate ann
</span><a href="System.Console.CmdArgs.Annotate.html#%3A%3D%2B"><span class="hs-operator hs-var">:=+</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var">fieldIndex</span></a></span><span> </span><span id="local-6989586621679274752"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274752"><span class="hs-identifier hs-var">ctor</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274759"><span class="annot"><span class="annottext">c -&gt; f
</span><a href="#local-6989586621679274759"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#%3A%3D%2B"><span class="hs-operator hs-type">:=+</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotate a]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679274761"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679274761"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-256"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Int
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Maybe Int) -&gt; String -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Couldn't resolve field for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274752"><span class="hs-identifier hs-var">ctor</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679274764"><span class="annot"><span class="annottext">c :: Any
</span><a href="#local-6989586621679274764"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; [Any] -&gt; Any
</span><a href="Data.Generics.Any.html#recompose"><span class="hs-identifier hs-var">recompose</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274752"><span class="hs-identifier hs-var">ctor</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a -&gt; Any
forall a. Data a =&gt; a -&gt; Any
</span><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Any) -&gt; a -&gt; Any
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; a
forall a. Int -&gt; a
</span><a href="System.Console.CmdArgs.Annotate.html#throwInt"><span class="hs-identifier hs-var">throwInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274767"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`asTypeOf`</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274769"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274767"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274767"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span class="annot"><a href="Data.Generics.Any.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621679274769"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274769"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Any] -&gt; [(Int, Any)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Any -&gt; [Any]
</span><a href="Data.Generics.Any.html#children"><span class="hs-identifier hs-var">children</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274752"><span class="hs-identifier hs-var">ctor</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-258"></span><span>          </span><span id="local-6989586621679274761"><span class="annot"><span class="annottext">res :: Maybe Int
</span><a href="#local-6989586621679274761"><span class="hs-identifier hs-var hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f -&gt; Maybe Int
forall a. a -&gt; Maybe Int
</span><a href="System.Console.CmdArgs.Annotate.html#catchInt"><span class="hs-identifier hs-var">catchInt</span></a></span><span> </span><span class="annot"><span class="annottext">(f -&gt; Maybe Int) -&gt; f -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; f
</span><a href="#local-6989586621679274759"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(c -&gt; f) -&gt; c -&gt; f
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Any -&gt; c
forall a. Typeable a =&gt; Any -&gt; a
</span><a href="Data.Generics.Any.html#fromAny"><span class="hs-identifier hs-var">fromAny</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679274764"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-259"></span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#fieldIndex"><span class="hs-identifier hs-var">fieldIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Annotate a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-keyword">data</span><span> </span><span id="ExceptionInt"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ExceptionInt"><span class="hs-identifier hs-var">ExceptionInt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExceptionInt"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ExceptionInt"><span class="hs-identifier hs-var">ExceptionInt</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679274775"><span id="local-6989586621679274779"><span id="local-6989586621679274783"><span class="annot"><span class="annottext">Int -&gt; ExceptionInt -&gt; ShowS
[ExceptionInt] -&gt; ShowS
ExceptionInt -&gt; String
(Int -&gt; ExceptionInt -&gt; ShowS)
-&gt; (ExceptionInt -&gt; String)
-&gt; ([ExceptionInt] -&gt; ShowS)
-&gt; Show ExceptionInt
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ExceptionInt -&gt; ShowS
showsPrec :: Int -&gt; ExceptionInt -&gt; ShowS
$cshow :: ExceptionInt -&gt; String
show :: ExceptionInt -&gt; String
$cshowList :: [ExceptionInt] -&gt; ShowS
showList :: [ExceptionInt] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679274790"><span id="local-6989586621679274794"><span id="local-6989586621679274797"><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ExceptionInt"><span class="hs-identifier hs-type">ExceptionInt</span></a></span></span></span></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="local-6989586621679274400"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#throwInt"><span class="hs-identifier hs-type">throwInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679274400"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-268"></span><span id="throwInt"><span class="annot"><span class="annottext">throwInt :: forall a. Int -&gt; a
</span><a href="System.Console.CmdArgs.Annotate.html#throwInt"><span class="hs-identifier hs-var hs-var">throwInt</span></a></span></span><span> </span><span id="local-6989586621679274801"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274801"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptionInt -&gt; a
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">throw</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ExceptionInt
</span><a href="System.Console.CmdArgs.Annotate.html#ExceptionInt"><span class="hs-identifier hs-var">ExceptionInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274801"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#catchInt"><span class="hs-pragma hs-type">catchInt</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-272"></span><span id="local-6989586621679274402"><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#catchInt"><span class="hs-identifier hs-type">catchInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679274402"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-273"></span><span id="catchInt"><span class="annot"><span class="annottext">catchInt :: forall a. a -&gt; Maybe Int
</span><a href="System.Console.CmdArgs.Annotate.html#catchInt"><span class="hs-identifier hs-var hs-var">catchInt</span></a></span></span><span> </span><span id="local-6989586621679274806"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274806"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Int) -&gt; Maybe Int
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Int) -&gt; Maybe Int) -&gt; IO (Maybe Int) -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-274"></span><span>    </span><span id="local-6989586621679274807"><span class="annot"><span class="annottext">Either ExceptionInt a
</span><a href="#local-6989586621679274807"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO (Either ExceptionInt a)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><span class="hs-identifier hs-var">try</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
</span><span class="hs-identifier hs-var">evaluate</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679274806"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int -&gt; IO (Maybe Int)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; IO (Maybe Int)) -&gt; Maybe Int -&gt; IO (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ExceptionInt a
</span><a href="#local-6989586621679274807"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-276"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.CmdArgs.Annotate.html#ExceptionInt"><span class="hs-identifier hs-type">ExceptionInt</span></a></span><span> </span><span id="local-6989586621679274808"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274808"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679274808"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-277"></span><span>        </span><span class="annot"><span class="annottext">Either ExceptionInt a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-278"></span></pre></body></html>